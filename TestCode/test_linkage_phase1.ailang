// Copyright (c) 2025 Sean Collins, 2 Paws Machine and Engineering. All rights reserved.
//
// Licensed under the Sean Collins Software License (SCSL). See the LICENSE file in the root directory of this project
// for the full terms and conditions, including restrictions on forking, corporate use, and permissions for private/teaching purposes.


// Copyright (c) 2025 Sean Collins, 2 Paws Machine and Engineering. All rights reserved.
//
// Licensed under the Sean Collins Software License (SCSL). See the LICENSE file in the root directory of this project
// for the full terms and conditions, including restrictions on forking, corporate use, and permissions for private/teaching purposes.


// Test Phase 1: Type Tracking
// This test verifies type tracking but doesn't use field access yet

LinkagePool.TestPool {
    "field1": Initialize=0
    "field2": Initialize=0
}

LinkagePool.OtherPool {
    "data": Initialize=0
}

// Test 1: AllocateLinkage type tracking
PrintMessage("Test 1: AllocateLinkage tracking\n")
ptr1 = AllocateLinkage(LinkagePool.TestPool)
PrintMessage("Allocated TestPool at: ")
PrintNumber(ptr1)
PrintMessage("\n")

// Test 2: Multiple allocations
PrintMessage("Test 2: Multiple allocations\n")
ptr2 = AllocateLinkage(LinkagePool.OtherPool)
PrintMessage("Allocated OtherPool at: ")
PrintNumber(ptr2)
PrintMessage("\n")

// Test 3: Assignment propagation
PrintMessage("Test 3: Type propagation\n")
ptr3 = ptr1  // Should propagate TestPool type
PrintMessage("ptr3 = ptr1, value: ")
PrintNumber(ptr3)
PrintMessage("\n")

// Test 4: Function parameter type tracking
Function.TestParam {
    Input: param: LinkagePool.TestPool
    PrintMessage("In function, param at: ")
    PrintNumber(param)
    PrintMessage("\n")
    ReturnValue(0)
}

PrintMessage("Test 4: Function parameter\n")
TestParam(ptr1)

PrintMessage("Phase 1 tests complete!\n")
PrintMessage("Check debug output for type tracking messages\n")